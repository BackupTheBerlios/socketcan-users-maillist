<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] [PATCH] mscan: add non-polling rx
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20%5BPATCH%5D%20mscan%3A%20add%20non-polling%20rx&In-Reply-To=%3C20091030223941.GA1643%40pengutronix.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001115.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] [PATCH] mscan: add non-polling rx</H1>
    <B>Luotao Fu</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20%5BPATCH%5D%20mscan%3A%20add%20non-polling%20rx&In-Reply-To=%3C20091030223941.GA1643%40pengutronix.de%3E"
       TITLE="[Socketcan-users] [PATCH] mscan: add non-polling rx">l.fu at pengutronix.de
       </A><BR>
    <I>Fri Oct 30 23:39:41 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001115.html">[Socketcan-users] [PATCH] mscan: add non-polling rx
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1116">[ date ]</a>
              <a href="thread.html#1116">[ thread ]</a>
              <a href="subject.html#1116">[ subject ]</a>
              <a href="author.html#1116">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
On Fri, Oct 30, 2009 at 06:32:24PM +0100, Wolfgang Grandegger wrote:
&gt;<i> Luotao Fu wrote:
</I>&gt;<i> &gt; This one adds an option to turn of napi and process rx directly in mscan isr. As
</I>&gt;<i> &gt; for mpc52xx this feature can be turned on by setting a rx-irq property int the
</I>&gt;<i> &gt; device tree, e.g:
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">can at 980</A> {
</I>&gt;<i> &gt;     compatible = &quot;fsl,mpc5200b-mscan&quot;,&quot;fsl,mpc5200-mscan&quot;;
</I>&gt;<i> &gt;     interrupts = &lt;2 18 0&gt;;
</I>&gt;<i> &gt;     rx-irq;
</I>&gt;<i> &gt;     reg = &lt;0x980 0x80&gt;;
</I>&gt;<i> &gt; };
</I>&gt;<i> &gt; Default is the polling rx.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Signed-off-by: Luotao Fu &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">l.fu at pengutronix.de</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> This has little chance to be accepted as the device tree is about
</I>&gt;<i> hardware. It should not be used to tell the driver what to do (software
</I>&gt;<i> settings). I have CCed the devicetree-discuss ML for clarification.
</I>&gt;<i> 
</I>
Wolfram has made me clear on this point already. sigh, always the pain
with device tree. Since we can't do this in device tree and
common platformdevices are also not there. I see little options for
this.

&gt;<i> What is your motivation to handle the interrupts in the interrupt context?
</I>&gt;<i> 
</I>
Mainly it should be useful for e.g. Realtimesystems since we can then
control the priority of can isr for rx thread directly instead of
relying on the net softirq...what ever... We need the stuff for a custom
project and I want to give it a try for mainline.

cheers
Luotao Fu

-- 
Pengutronix e.K.                           | Dipl.-Ing. Luotao Fu        |
Industrial Linux Solutions                 | <A HREF="http://www.pengutronix.de/">http://www.pengutronix.de/</A>  |
Peiner Str. 6-8, 31137 Hildesheim, Germany | Phone: +49-5121-206917-0    |
Amtsgericht Hildesheim, HRA 2686           | Fax:   +49-5121-206917-5555 |
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/socketcan-users/attachments/20091030/95036344/attachment.pgp">https://lists.berlios.de/pipermail/socketcan-users/attachments/20091030/95036344/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001115.html">[Socketcan-users] [PATCH] mscan: add non-polling rx
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1116">[ date ]</a>
              <a href="thread.html#1116">[ thread ]</a>
              <a href="subject.html#1116">[ subject ]</a>
              <a href="author.html#1116">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
