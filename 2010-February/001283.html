<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] RFC: How to deal with bus-error
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20RFC%3A%20How%20to%20deal%20with%20bus-error&In-Reply-To=%3C4B6EF2DD.1000409%40grandegger.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001281.html">
   <LINK REL="Next"  HREF="001285.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] RFC: How to deal with bus-error</H1>
    <B>Wolfgang Grandegger</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20RFC%3A%20How%20to%20deal%20with%20bus-error&In-Reply-To=%3C4B6EF2DD.1000409%40grandegger.com%3E"
       TITLE="[Socketcan-users] RFC: How to deal with bus-error">wg at grandegger.com
       </A><BR>
    <I>Sun Feb  7 18:05:33 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001281.html">[Socketcan-users] RFC: How to deal with bus-error
</A></li>
        <LI>Next message: <A HREF="001285.html">[Socketcan-users] RFC: How to deal with bus-error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1283">[ date ]</a>
              <a href="thread.html#1283">[ thread ]</a>
              <a href="subject.html#1283">[ subject ]</a>
              <a href="author.html#1283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>christian pellegrin wrote:
&gt;<i> On Sun, Feb 7, 2010 at 1:45 PM, Wolfgang Grandegger &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">wg at grandegger.com</A>&gt; wrote:
</I>&gt;&gt;<i> I found this useful information in the AT91 CAN manual:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;begin quote&gt;
</I>&gt;<i> ....
</I>&gt;&gt;<i> &lt;end qoute&gt;
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> Yes this is exactly what I see in practice. Anyway my initial question
</I>&gt;<i> was much simpler: the user level application can see an error-warning,
</I>&gt;<i> error-passive or buss-off state when it gets an error frame (so, let's
</I>&gt;<i> say, it's &quot;interrupt&quot; driven). To be able to sense that the bus is
</I>&gt;<i> back to error-active I don't see any other way than polling the state.
</I>&gt;<i> Is this right or I'm missing something?
</I>
When it's in bus-off, you need to perform a bus-off recovery to get back
to the error active state. If the state changes from error passive to
error active or error warning), an interrupt should be triggered but we
may not handle that properly in software (which expects the state in
increase). Can you confirm that? Normal state changes are interrupt
driver. So, if the hardware does not trigger an interrupt, we have a
problem.

Wolfgang.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001281.html">[Socketcan-users] RFC: How to deal with bus-error
</A></li>
	<LI>Next message: <A HREF="001285.html">[Socketcan-users] RFC: How to deal with bus-error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1283">[ date ]</a>
              <a href="thread.html#1283">[ thread ]</a>
              <a href="subject.html#1283">[ subject ]</a>
              <a href="author.html#1283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
