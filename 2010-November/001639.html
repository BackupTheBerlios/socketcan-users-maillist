<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] Virtual can is OK, but the real one is KO...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Virtual%20can%20is%20OK%2C%20but%20the%20real%20one%20is%20KO...&In-Reply-To=%3CAANLkTi%3D9GkUiLrcYsqPgoE8yP9sx3EP2Jrv8D7B5PyJK%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001638.html">
   <LINK REL="Next"  HREF="001640.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] Virtual can is OK, but the real one is KO...</H1>
    <B>Willy Lambert</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Virtual%20can%20is%20OK%2C%20but%20the%20real%20one%20is%20KO...&In-Reply-To=%3CAANLkTi%3D9GkUiLrcYsqPgoE8yP9sx3EP2Jrv8D7B5PyJK%40mail.gmail.com%3E"
       TITLE="[Socketcan-users] Virtual can is OK, but the real one is KO...">lambert.willy at gmail.com
       </A><BR>
    <I>Sun Nov 14 20:36:07 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001638.html">[Socketcan-users] Virtual can is OK, but the real one is KO...
</A></li>
        <LI>Next message: <A HREF="001640.html">[Socketcan-users] Virtual can is OK, but the real one is KO...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1639">[ date ]</a>
              <a href="thread.html#1639">[ thread ]</a>
              <a href="subject.html#1639">[ subject ]</a>
              <a href="author.html#1639">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">root at alpha</A>:/opt/ard# cat /proc/interrupts
</I>&gt;<i>             CPU0       CPU1
</I>&gt;<i>    0:     153590     153124   IO-APIC-edge      timer
</I>&gt;<i>    1:          0          2   IO-APIC-edge      i8042
</I>&gt;<i>    5:          0          0   IO-APIC-edge      can0
</I>&gt;<i>    7:          0          0   IO-APIC-edge      can1
</I>&gt;<i>    8:          1          0   IO-APIC-edge      rtc0
</I>&gt;<i>    9:          0          0   IO-APIC-fasteoi   acpi
</I>&gt;<i>   12:          2          2   IO-APIC-edge      i8042
</I>&gt;<i>   14:          0          0   IO-APIC-edge      ata_piix
</I>&gt;<i>   15:       2433       2423   IO-APIC-edge      ata_piix
</I>&gt;<i>   19:          0          0   IO-APIC-fasteoi   uhci_hcd:usb3
</I>&gt;<i>   23:          0          0   IO-APIC-fasteoi   ehci_hcd:usb1,
</I>&gt;<i> uhci_hcd:usb2
</I>&gt;<i>   24:      59852      60280   PCI-MSI-edge      eth0
</I>&gt;<i>  NMI:          0          0   Non-maskable interrupts
</I>&gt;<i>  LOC:      92974      58404   Local timer interrupts
</I>&gt;<i>  SPU:          0          0   Spurious interrupts
</I>&gt;<i>  PMI:          0          0   Performance monitoring interrupts
</I>&gt;<i>  PND:          0          0   Performance pending work
</I>&gt;<i>  RES:        185        273   Rescheduling interrupts
</I>&gt;<i>  CAL:         11         39   Function call interrupts
</I>&gt;<i>  TLB:        131        108   TLB shootdowns
</I>&gt;<i>  TRM:          0          0   Thermal event interrupts
</I>&gt;<i>  THR:          0          0   Threshold APIC interrupts
</I>&gt;<i>  MCE:          0          0   Machine check exceptions
</I>&gt;<i>  MCP:         72         72   Machine check polls
</I>&gt;<i>  ERR:          1
</I>&gt;<i>  MIS:          0
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">root at alpha</A>:/opt/ard#
</I>&gt;<i>
</I>

Everything sounds normal to me. I am quite sure of the interrupts as I am
willing to use the default configuration (I have jumpers to choose this and
I am sure I did not change them) and it's written IRQ5&lt;=&gt; CAN1 and
IRQ7&lt;=&gt;CAN2
Can1 is at Basisadresse=0hD000 and CAN2 is at Basisadresse+Offset=0h0200h,
it it exactly what I configured.

Here is my dmesg when I load and configure modules :

&gt;<i> 20537.719019] can: controller area network core (rev 20090105 abi 8)
</I>&gt;<i> [20537.719114] NET: Registered protocol family 29
</I>&gt;<i> [20537.725995] can: raw protocol (rev 20090105)
</I>&gt;<i> [20537.734246] can: broadcast manager protocol (rev 20090105 t)
</I>&gt;<i> [20537.740686] sja1000 CAN netdevice driver
</I>&gt;<i> [20537.746588] sja1000_isa sja1000_isa.0: sja1000_isa device registered
</I>&gt;<i> (reg_base=0xc00d0000, irq=5)
</I>&gt;<i> [20537.749266] sja1000_isa sja1000_isa.1: sja1000_isa device registered
</I>&gt;<i> (reg_base=0xc00d0200, irq=7)
</I>&gt;<i> [20537.755180] Legacy sja1000_isa driver for max. 8 devices registered
</I>&gt;<i> [20537.759795] sja1000_isa sja1000_isa.0: setting BTR0=0x00 BTR1=0x1c
</I>&gt;<i> [20537.763583] sja1000_isa sja1000_isa.1: setting BTR0=0x00 BTR1=0x1c
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">root at alpha</A>:/opt/ard#
</I>&gt;<i>
</I>


2010/11/14 Wolfgang Grandegger &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">wg at grandegger.com</A>&gt;

&gt;<i> On 11/14/2010 08:14 PM, Willy Lambert wrote:
</I>&gt;<i> &gt; At the moment I have :
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">root at alpha</A>:/opt/ard# ip -d -s link show can0
</I>&gt;<i> &gt;&gt; 17: can0: &lt;NOARP,UP,LOWER_UP,ECHO&gt; mtu 16 qdisc pfifo_fast state UNKNOWN
</I>&gt;<i> &gt;&gt; qlen 10
</I>&gt;<i> &gt;&gt;     link/can
</I>&gt;<i> &gt;&gt;     can state ERROR-ACTIVE restart-ms 10000
</I>&gt;<i> &gt;&gt;     bitrate 500000 sample-point 0.875
</I>&gt;<i> &gt;&gt;     tq 125 prop-seg 6 phase-seg1 7 phase-seg2 2 sjw 1
</I>&gt;<i> &gt;&gt;     sja1000: tseg1 1..16 tseg2 1..8 sjw 1..4 brp 1..64 brp-inc 1
</I>&gt;<i> &gt;&gt;     clock 8000000
</I>&gt;<i> &gt;&gt;     re-started bus-errors arbit-lost error-warn error-pass bus-off
</I>&gt;<i> &gt;&gt;     0          0          0          0          0          0
</I>&gt;<i> &gt;&gt;     RX: bytes  packets  errors  dropped overrun mcast
</I>&gt;<i> &gt;&gt;     0          0        0       0       0       0
</I>&gt;<i> &gt;&gt;     TX: bytes  packets  errors  dropped carrier collsns
</I>&gt;<i> &gt;&gt;     0          0        0       0       0       0
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; candump does not show anything !
</I>&gt;<i>
</I>&gt;<i> What does &quot;cat /proc/interrupts&quot; show? Are you sure you are using the
</I>&gt;<i> correct interrupt numbers?
</I>&gt;<i>
</I>&gt;<i> Wolfgang.
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/socketcan-users/attachments/20101114/4effbb07/attachment.html">https://lists.berlios.de/pipermail/socketcan-users/attachments/20101114/4effbb07/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001638.html">[Socketcan-users] Virtual can is OK, but the real one is KO...
</A></li>
	<LI>Next message: <A HREF="001640.html">[Socketcan-users] Virtual can is OK, but the real one is KO...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1639">[ date ]</a>
              <a href="thread.html#1639">[ thread ]</a>
              <a href="subject.html#1639">[ subject ]</a>
              <a href="author.html#1639">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
