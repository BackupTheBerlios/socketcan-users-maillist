<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] Virtual can is OK, but the real one is KO...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Virtual%20can%20is%20OK%2C%20but%20the%20real%20one%20is%20KO...&In-Reply-To=%3CAANLkTi%3DCAdv9ZyfWBc%2Bwt5-zLJzdSKeBjBrMcrUn5Uhu%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001639.html">
   <LINK REL="Next"  HREF="001641.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] Virtual can is OK, but the real one is KO...</H1>
    <B>Willy Lambert</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Virtual%20can%20is%20OK%2C%20but%20the%20real%20one%20is%20KO...&In-Reply-To=%3CAANLkTi%3DCAdv9ZyfWBc%2Bwt5-zLJzdSKeBjBrMcrUn5Uhu%40mail.gmail.com%3E"
       TITLE="[Socketcan-users] Virtual can is OK, but the real one is KO...">lambert.willy at gmail.com
       </A><BR>
    <I>Sun Nov 14 20:42:49 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001639.html">[Socketcan-users] Virtual can is OK, but the real one is KO...
</A></li>
        <LI>Next message: <A HREF="001641.html">[Socketcan-users] Virtual can is OK, but the real one is KO...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1640">[ date ]</a>
              <a href="thread.html#1640">[ thread ]</a>
              <a href="subject.html#1640">[ subject ]</a>
              <a href="author.html#1640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In case you need iomem, I can see sja1000_isa at the rigth place

<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">root at alpha</A>:/proc# cat iomem
00000000-0000ffff : reserved
00010000-0009fbff : System RAM
0009fc00-0009ffff : reserved
000a0000-000bffff : Video RAM area
000c0000-000c7fff : Video ROM
000d0000-000d001f : sja1000_isa
000d0200-000d021f : sja1000_isa
000e0000-000fffff : reserved
  000f0000-000fffff : System ROM
00100000-7fd9ffff : System RAM
  01000000-01264788 : Kernel code
  01264789-013a6c1f : Kernel data
  0141c000-014c85d3 : Kernel bss
7fda0000-7fdadfff : ACPI Tables
7fdae000-7fddffff : ACPI Non-volatile Storage
7fde0000-7fdfffff : reserved
7fe00000-7fffffff : RAM buffer
80000000-80000fff : Intel Flush Page
d0000000-dfffffff : 0000:00:02.0
e0000000-efffffff : PCI MMCONFIG 0 [00-ff]
  e0000000-efffffff : pnp 00:0e
fe980000-fe9fffff : 0000:00:02.1
fea00000-feafffff : 0000:00:02.0
feb00000-feb7ffff : 0000:00:02.0
febc0000-febdffff : 0000:00:19.0
  febc0000-febdffff : e1000e
febfe000-febfefff : 0000:00:19.0
  febfe000-febfefff : e1000e
febff800-febffbff : 0000:00:1d.7
  febff800-febffbff : ehci_hcd
febffc00-febffcff : 0000:00:1f.3
fec00000-fec00fff : IOAPIC 0
fed14000-fed19fff : pnp 00:01
fed1c000-fed1ffff : pnp 00:07
fed20000-fed3ffff : pnp 00:07
fed40000-fed8ffff : pnp 00:07
fed90000-fed93fff : pnp 00:01
fee00000-fee00fff : Local APIC
  fee00000-fee00fff : reserved
    fee00000-fee00fff : pnp 00:0a
ffb00000-ffffffff : reserved
  ffc00000-ffefffff : pnp 00:09


2010/11/14 Willy Lambert &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">lambert.willy at gmail.com</A>&gt;

&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">root at alpha</A>:/opt/ard# cat /proc/interrupts
</I>&gt;&gt;<i>             CPU0       CPU1
</I>&gt;&gt;<i>    0:     153590     153124   IO-APIC-edge      timer
</I>&gt;&gt;<i>    1:          0          2   IO-APIC-edge      i8042
</I>&gt;&gt;<i>    5:          0          0   IO-APIC-edge      can0
</I>&gt;&gt;<i>    7:          0          0   IO-APIC-edge      can1
</I>&gt;&gt;<i>    8:          1          0   IO-APIC-edge      rtc0
</I>&gt;&gt;<i>    9:          0          0   IO-APIC-fasteoi   acpi
</I>&gt;&gt;<i>   12:          2          2   IO-APIC-edge      i8042
</I>&gt;&gt;<i>   14:          0          0   IO-APIC-edge      ata_piix
</I>&gt;&gt;<i>   15:       2433       2423   IO-APIC-edge      ata_piix
</I>&gt;&gt;<i>   19:          0          0   IO-APIC-fasteoi   uhci_hcd:usb3
</I>&gt;&gt;<i>   23:          0          0   IO-APIC-fasteoi   ehci_hcd:usb1,
</I>&gt;&gt;<i> uhci_hcd:usb2
</I>&gt;&gt;<i>   24:      59852      60280   PCI-MSI-edge      eth0
</I>&gt;&gt;<i>  NMI:          0          0   Non-maskable interrupts
</I>&gt;&gt;<i>  LOC:      92974      58404   Local timer interrupts
</I>&gt;&gt;<i>  SPU:          0          0   Spurious interrupts
</I>&gt;&gt;<i>  PMI:          0          0   Performance monitoring interrupts
</I>&gt;&gt;<i>  PND:          0          0   Performance pending work
</I>&gt;&gt;<i>  RES:        185        273   Rescheduling interrupts
</I>&gt;&gt;<i>  CAL:         11         39   Function call interrupts
</I>&gt;&gt;<i>  TLB:        131        108   TLB shootdowns
</I>&gt;&gt;<i>  TRM:          0          0   Thermal event interrupts
</I>&gt;&gt;<i>  THR:          0          0   Threshold APIC interrupts
</I>&gt;&gt;<i>  MCE:          0          0   Machine check exceptions
</I>&gt;&gt;<i>  MCP:         72         72   Machine check polls
</I>&gt;&gt;<i>  ERR:          1
</I>&gt;&gt;<i>  MIS:          0
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">root at alpha</A>:/opt/ard#
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Everything sounds normal to me. I am quite sure of the interrupts as I am
</I>&gt;<i> willing to use the default configuration (I have jumpers to choose this and
</I>&gt;<i> I am sure I did not change them) and it's written IRQ5&lt;=&gt; CAN1 and
</I>&gt;<i> IRQ7&lt;=&gt;CAN2
</I>&gt;<i> Can1 is at Basisadresse=0hD000 and CAN2 is at Basisadresse+Offset=0h0200h,
</I>&gt;<i> it it exactly what I configured.
</I>&gt;<i>
</I>&gt;<i> Here is my dmesg when I load and configure modules :
</I>&gt;<i>
</I>&gt;&gt;<i> 20537.719019] can: controller area network core (rev 20090105 abi 8)
</I>&gt;&gt;<i> [20537.719114] NET: Registered protocol family 29
</I>&gt;&gt;<i> [20537.725995] can: raw protocol (rev 20090105)
</I>&gt;&gt;<i> [20537.734246] can: broadcast manager protocol (rev 20090105 t)
</I>&gt;&gt;<i> [20537.740686] sja1000 CAN netdevice driver
</I>&gt;&gt;<i> [20537.746588] sja1000_isa sja1000_isa.0: sja1000_isa device registered
</I>&gt;&gt;<i> (reg_base=0xc00d0000, irq=5)
</I>&gt;&gt;<i> [20537.749266] sja1000_isa sja1000_isa.1: sja1000_isa device registered
</I>&gt;&gt;<i> (reg_base=0xc00d0200, irq=7)
</I>&gt;&gt;<i> [20537.755180] Legacy sja1000_isa driver for max. 8 devices registered
</I>&gt;&gt;<i> [20537.759795] sja1000_isa sja1000_isa.0: setting BTR0=0x00 BTR1=0x1c
</I>&gt;&gt;<i> [20537.763583] sja1000_isa sja1000_isa.1: setting BTR0=0x00 BTR1=0x1c
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">root at alpha</A>:/opt/ard#
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2010/11/14 Wolfgang Grandegger &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">wg at grandegger.com</A>&gt;
</I>&gt;<i>
</I>&gt;&gt;<i> On 11/14/2010 08:14 PM, Willy Lambert wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; At the moment I have :
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">root at alpha</A>:/opt/ard# ip -d -s link show can0
</I>&gt;&gt;<i> &gt;&gt; 17: can0: &lt;NOARP,UP,LOWER_UP,ECHO&gt; mtu 16 qdisc pfifo_fast state
</I>&gt;&gt;<i> UNKNOWN
</I>&gt;&gt;<i> &gt;&gt; qlen 10
</I>&gt;&gt;<i> &gt;&gt;     link/can
</I>&gt;&gt;<i> &gt;&gt;     can state ERROR-ACTIVE restart-ms 10000
</I>&gt;&gt;<i> &gt;&gt;     bitrate 500000 sample-point 0.875
</I>&gt;&gt;<i> &gt;&gt;     tq 125 prop-seg 6 phase-seg1 7 phase-seg2 2 sjw 1
</I>&gt;&gt;<i> &gt;&gt;     sja1000: tseg1 1..16 tseg2 1..8 sjw 1..4 brp 1..64 brp-inc 1
</I>&gt;&gt;<i> &gt;&gt;     clock 8000000
</I>&gt;&gt;<i> &gt;&gt;     re-started bus-errors arbit-lost error-warn error-pass bus-off
</I>&gt;&gt;<i> &gt;&gt;     0          0          0          0          0          0
</I>&gt;&gt;<i> &gt;&gt;     RX: bytes  packets  errors  dropped overrun mcast
</I>&gt;&gt;<i> &gt;&gt;     0          0        0       0       0       0
</I>&gt;&gt;<i> &gt;&gt;     TX: bytes  packets  errors  dropped carrier collsns
</I>&gt;&gt;<i> &gt;&gt;     0          0        0       0       0       0
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; candump does not show anything !
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What does &quot;cat /proc/interrupts&quot; show? Are you sure you are using the
</I>&gt;&gt;<i> correct interrupt numbers?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Wolfgang.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/socketcan-users/attachments/20101114/9fbb9a25/attachment.html">https://lists.berlios.de/pipermail/socketcan-users/attachments/20101114/9fbb9a25/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001639.html">[Socketcan-users] Virtual can is OK, but the real one is KO...
</A></li>
	<LI>Next message: <A HREF="001641.html">[Socketcan-users] Virtual can is OK, but the real one is KO...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1640">[ date ]</a>
              <a href="thread.html#1640">[ thread ]</a>
              <a href="subject.html#1640">[ subject ]</a>
              <a href="author.html#1640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
