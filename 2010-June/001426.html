<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] error active (CAN_ERR_CRTL / CAN_ERR_CRTL_UNSPEC)	not indicated in rev1181
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2010-June/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20error%20active%20%28CAN_ERR_CRTL%20/%20CAN_ERR_CRTL_UNSPEC%29%0A%09not%20indicated%20in%20rev1181&In-Reply-To=%3C166589D0B9DD2547A1319599B9BADA1F3AC6E6%40vsv-exchange.ixxat.intranet.priv%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001425.html">
   <LINK REL="Next"  HREF="001427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] error active (CAN_ERR_CRTL / CAN_ERR_CRTL_UNSPEC)	not indicated in rev1181</H1>
    <B>gribov at ixxat.de</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20error%20active%20%28CAN_ERR_CRTL%20/%20CAN_ERR_CRTL_UNSPEC%29%0A%09not%20indicated%20in%20rev1181&In-Reply-To=%3C166589D0B9DD2547A1319599B9BADA1F3AC6E6%40vsv-exchange.ixxat.intranet.priv%3E"
       TITLE="[Socketcan-users] error active (CAN_ERR_CRTL / CAN_ERR_CRTL_UNSPEC)	not indicated in rev1181">gribov at ixxat.de
       </A><BR>
    <I>Mon Jun 14 13:33:26 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001425.html">[Socketcan-users] Fwd:  data not been recieved correctly
</A></li>
        <LI>Next message: <A HREF="001427.html">[Socketcan-users] error active (CAN_ERR_CRTL / CAN_ERR_CRTL_UNSPEC) not indicated in	rev1181
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1426">[ date ]</a>
              <a href="thread.html#1426">[ thread ]</a>
              <a href="subject.html#1426">[ subject ]</a>
              <a href="author.html#1426">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
I have got a question concerning receiving the can error control messages.

We have used SocketCAN SW (rev 1033) with sysfs control for our CANopen SW. 
Everything was working just fine. We have received CAN error control 
messages (can_id CAN_ERR_CRTL with flag CAN_ERR_FLAG set) to react on the 
following events:
- bus-off
- CAN Rx overrun
- error passive
- error active (recovery from errors)

The &quot;error active&quot; was indicated by the error control message with the value
CAN_ERR_CRTL_UNSPEC in the databyte 1.

Now I try to use more current version (rev 1181) of SocketCAN, because we 
need netlink CAN control API. Here I see one problem - no error active is 
indicated. The CAN_ERR_CRTL_UNSPEC error control messages are missed. 
I observe this problem with both sysfs and netlink variants.


Is it known and wanted behavior, to not indicate CAN_ERR_CRTL_UNSPEC any more?


Thanks and regards,
Vladislav


P.S. FYI, I use the libsocketcan-nl from pengutronix for the netlink
control; however I do not think this may be relevant.



Mit freundlichen Gr&#252;&#223;en / Kind regards,
Dipl.-Ing. Vladislav Gribov MSc
Development
--------------------------------------------
IXXAT Automation GmbH
Leibnizstr. 15, 88250 Weingarten, Germany 
Phone  +49-751-56146-0 
Direct +49-751-56146-162
Fax    +49-751-56146-29
mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">gribov at ixxat.de</A>
<A HREF="http://www.ixxat.de">http://www.ixxat.de</A>
--------------------------------------------
PRIVILEGED AND CONFIDENTIAL.
Any unauthorized use or disclosure
is strictly prohibited.
--------------------------------------------
Sitz der Gesellschaft: Weingarten
Handelsregister Ulm HRB 551905
Gesch&#228;ftsf&#252;hrer:
Dipl.-Ing. Christian Schlegel,
Dipl.-Ing. Werner Sauter
--------------------------------------------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001425.html">[Socketcan-users] Fwd:  data not been recieved correctly
</A></li>
	<LI>Next message: <A HREF="001427.html">[Socketcan-users] error active (CAN_ERR_CRTL / CAN_ERR_CRTL_UNSPEC) not indicated in	rev1181
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1426">[ date ]</a>
              <a href="thread.html#1426">[ thread ]</a>
              <a href="subject.html#1426">[ subject ]</a>
              <a href="author.html#1426">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
