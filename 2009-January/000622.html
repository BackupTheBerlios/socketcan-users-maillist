<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] [Xenomai-help] rtcanconfig rtcansend rtcanrecv
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20%5BXenomai-help%5D%20rtcanconfig%20rtcansend%20rtcanrecv&In-Reply-To=%3C496BA87C.2020306%40grandegger.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000621.html">
   <LINK REL="Next"  HREF="000623.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] [Xenomai-help] rtcanconfig rtcansend rtcanrecv</H1>
    <B>Wolfgang Grandegger</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20%5BXenomai-help%5D%20rtcanconfig%20rtcansend%20rtcanrecv&In-Reply-To=%3C496BA87C.2020306%40grandegger.com%3E"
       TITLE="[Socketcan-users] [Xenomai-help] rtcanconfig rtcansend rtcanrecv">wg at grandegger.com
       </A><BR>
    <I>Mon Jan 12 21:30:52 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000621.html">[Socketcan-users] [Xenomai-help] rtcanconfig rtcansend rtcanrecv
</A></li>
        <LI>Next message: <A HREF="000623.html">[Socketcan-users] [Xenomai-help] rtcanconfig rtcansend rtcanrecv
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#622">[ date ]</a>
              <a href="thread.html#622">[ thread ]</a>
              <a href="subject.html#622">[ subject ]</a>
              <a href="author.html#622">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Charlton, John wrote:
&gt;<i> I agree that rtcan1 transmit interrupt request is set as is rtcan0 receive request in sja1000 base + 3, but I notice that neither interrupt is enabled in the control register (offset 0).  I think the command register should be 0x06 so that TIE and RIE interrupt enable bits are set.  I am relying on the xeno_can_sja1000 module to set the interrupt enable bits since the xeno_can_tscan1 module should just provide access to the sja1000 registers.  I don't think the xeno_can_tscan1 should program any of the sja1000 registers itself--is that assumption correct?  I am specifying the correct interrupts which are jumper selected to be 5 and 7 for rtcan0 and rtcan1 respectively.  The jumper settings can be checked using the TS-CAN1 base + 6 to but the driver doesn't do that yet.
</I>
The interrupt enable register (IER) is at offset 0x4 and they are all
enabled (see below). The transfer from rtcan1 to rtcan0 went fine. Just
no interrupts are triggered. And yes, the SJA100 does all relevant
accesses to the SJA1000 chips. Some more questions:

- What do your read at offset 0x6 (JMP)?
- What does /proc/interrupts return?
- Do you see any RTCAN related messages with &quot;$ dmesg&quot;.

Wolfgang



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000621.html">[Socketcan-users] [Xenomai-help] rtcanconfig rtcansend rtcanrecv
</A></li>
	<LI>Next message: <A HREF="000623.html">[Socketcan-users] [Xenomai-help] rtcanconfig rtcansend rtcanrecv
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#622">[ date ]</a>
              <a href="thread.html#622">[ thread ]</a>
              <a href="subject.html#622">[ subject ]</a>
              <a href="author.html#622">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
