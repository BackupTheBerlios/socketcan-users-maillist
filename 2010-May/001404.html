<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] Problem of mcp251x
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2010-May/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Problem%20of%20mcp251x&In-Reply-To=%3CAANLkTilcp2nGoNxu9erFBCIbtXjaEd0X4vhl80KtT8po%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001403.html">
   <LINK REL="Next"  HREF="001405.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] Problem of mcp251x</H1>
    <B>Lei Luo</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Problem%20of%20mcp251x&In-Reply-To=%3CAANLkTilcp2nGoNxu9erFBCIbtXjaEd0X4vhl80KtT8po%40mail.gmail.com%3E"
       TITLE="[Socketcan-users] Problem of mcp251x">nudtrobert at gmail.com
       </A><BR>
    <I>Sun May 23 17:14:02 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001403.html">[Socketcan-users] Socket can h/w filter
</A></li>
        <LI>Next message: <A HREF="001405.html">[Socketcan-users] Problem booting with a ESD CAN interface card
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1404">[ date ]</a>
              <a href="thread.html#1404">[ thread ]</a>
              <a href="subject.html#1404">[ subject ]</a>
              <a href="author.html#1404">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Christian,

I have a problem about mcp251x in socketcan.
I want the chip silent (do not ack can frame, and do not rise irq) at the
beginning, and then shift into normal mode as soon as possible at some time.
How could I achive it ?
What I have tried is configure the chip in listen_only mode and then request
it into normal mode. But when I request mcp251x shift listen_only mode by
 mcp251x_write_reg(spi,CANCTRL, CANCTRL_REQOP_LISTEN_ONLY);
   or
mcp251x_write_bits(spi, CANCTRL_REQOP_LISTEN_ONLY, CANCTRL_REQOP_MASK);
   or
mcp251x_write_bits(spi, CANCTRL_REQOP_LISTEN_ONLY | CANCTRL_ABAT,
CANCTRL_REQOP_MASK | CANCTRL_ABAT);
The chip  got into sleeping mode , if I disable spi irq which the chip used,
it got into sleeping mode too.

Thanks for your work and your help.

Regards
Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/socketcan-users/attachments/20100523/d6ef3645/attachment.html">https://lists.berlios.de/pipermail/socketcan-users/attachments/20100523/d6ef3645/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001403.html">[Socketcan-users] Socket can h/w filter
</A></li>
	<LI>Next message: <A HREF="001405.html">[Socketcan-users] Problem booting with a ESD CAN interface card
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1404">[ date ]</a>
              <a href="thread.html#1404">[ thread ]</a>
              <a href="subject.html#1404">[ subject ]</a>
              <a href="author.html#1404">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
