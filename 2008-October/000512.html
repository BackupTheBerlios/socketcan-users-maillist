<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] setting timming at sja1000
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20setting%20timming%20at%20sja1000&In-Reply-To=%3C48FF6CA7.5000406%40hartkopp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000511.html">
   <LINK REL="Next"  HREF="000513.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] setting timming at sja1000</H1>
    <B>Oliver Hartkopp</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20setting%20timming%20at%20sja1000&In-Reply-To=%3C48FF6CA7.5000406%40hartkopp.net%3E"
       TITLE="[Socketcan-users] setting timming at sja1000">socketcan at hartkopp.net
       </A><BR>
    <I>Wed Oct 22 20:10:47 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000511.html">[Socketcan-users] setting timming at sja1000
</A></li>
        <LI>Next message: <A HREF="000513.html">[Socketcan-users] ixxat-pci (with sja1000) doesn't receive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#512">[ date ]</a>
              <a href="thread.html#512">[ thread ]</a>
              <a href="subject.html#512">[ subject ]</a>
              <a href="author.html#512">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wolfgang Grandegger wrote:
&gt;<i> g a wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> finally, it works! the module creates can0 device. By the way, is
</I>&gt;&gt;<i> there any reason ixxat-pci not included in kernel/2.6/Makefile to be
</I>&gt;&gt;<i> compiled as module?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i>   
</I>
No, it's not.

It's just a default setting.
You can just say 'make CONFIG_CAN_IXXAT_PCI=m' or add the appropriate 
line in your local Makefile.


&gt;<i> The card has two can ports. Get both registered? What do you find in the
</I>&gt;<i> kernel log buffer ($ dmesg).I understand that you can send messages
</I>&gt;<i> successfully, at least, right?
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> I set can0's bitrate at /sys directory, and the i up it with ifconfig,
</I>&gt;&gt;<i> but i still don't receive message from another CAN device.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> What does &quot;$ candump any,0:0,#FFFFFFFF&quot; report. Do you see interrupts
</I>&gt;<i> counting up by looking to /proc/interrupts.
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> It has also a weird behave when i plug another device it just receive
</I>&gt;&gt;<i> 1 message (it suppoused that should be 5 message per second), i
</I>&gt;&gt;<i> thought it could be some connector trouble, but it has the same behave
</I>&gt;&gt;<i> when i turn on the other device (previously coneected) and start to
</I>&gt;&gt;<i> send message, i mean to avoid any connector problem. Someone has a
</I>&gt;&gt;<i> similar problem?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i>   
</I>
As Wolfgang stated before looking into /proc/interrupts and looking for 
the second CAN channel (can1) is important.

When you receive exactly ONE message, this could be an indication, that 
the interrupt is not handled correctly and that it's probably not 
re-armed after the one (and therefore only) irq-handling.

Maybe your sja1000 controllers are wired slightly different to the PCI 
&lt;-&gt; IO bus bridge (PLX PCI9052) than on the IXXAT Card ?!?

Regards,
Oliver

&gt;<i> I do not understand what you mean. What kind of device do you plug to
</I>&gt;<i> the CAN bus and why does it send messages automatically.
</I>&gt;<i>
</I>&gt;<i> Wolfgang.
</I>&gt;<i>   
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000511.html">[Socketcan-users] setting timming at sja1000
</A></li>
	<LI>Next message: <A HREF="000513.html">[Socketcan-users] ixxat-pci (with sja1000) doesn't receive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#512">[ date ]</a>
              <a href="thread.html#512">[ thread ]</a>
              <a href="subject.html#512">[ subject ]</a>
              <a href="author.html#512">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
