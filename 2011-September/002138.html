<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] socketcan and codesys
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2011-September/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20socketcan%20and%20codesys&In-Reply-To=%3C4E786960.7090900%40tke.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002137.html">
   <LINK REL="Next"  HREF="002140.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] socketcan and codesys</H1>
    <B>Bertil B&#228;ck</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20socketcan%20and%20codesys&In-Reply-To=%3C4E786960.7090900%40tke.fi%3E"
       TITLE="[Socketcan-users] socketcan and codesys">bertil.back at tke.fi
       </A><BR>
    <I>Tue Sep 20 12:22:24 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002137.html">[Socketcan-users] Compile Fails On 2.6.39-2
</A></li>
        <LI>Next message: <A HREF="002140.html">[Socketcan-users] socketcan and codesys
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2138">[ date ]</a>
              <a href="thread.html#2138">[ thread ]</a>
              <a href="subject.html#2138">[ subject ]</a>
              <a href="author.html#2138">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
I have a problem when using codesys v3 with SocketCAN on a ARM module 
using Linux kernel 3.0.2 with 2 SJA1000 CAN controllers.

I have two of these modules. I use a CAN messages to monitor if the 
other module is alive.

This is done by a toggle bit in one message that is sent every 100ms. If 
the toggle bit is not changed within 500ms. I send a alarm.

After about 36h of uptime I start getting alarms about one or the other 
module is missing and then the alarm starts to go away but gets 
triggered again. This happens about every 1-3 sec after the first alarm 
has been sent. The only way the solve the problem is to restart the that 
gives the alarm. Ie not the one that is sending the alarm.

I have used a external CAN logger to test the CAN messages. It seems 
like the messages are both sent and toggled. This makes me believe that 
the TX side is ok.

I also made a test codesys ping pong application. The messages are 
always sent on the CAN network verified with CANoe but codesys does not 
always receive them.

I think that the problem is in codesys v3. But how can I prove this? Any 
suggestions. So far I have only been successful in getting this error on 
the entire test system. Not standalone or with other test applications.

Bertil B&#228;ck

p.s

Another side note that I have seen is that the following.
I ran ip -d -s link show can1

It says that I have 3702 arbit-lost and also 3702 TX: errors.
Is one of these a bug? In my head a arbitration loss is not a tx error.
Tx error is like not getting a ACK bit or a error active frame after 
transmission. I.e causing the frame to be resent.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002137.html">[Socketcan-users] Compile Fails On 2.6.39-2
</A></li>
	<LI>Next message: <A HREF="002140.html">[Socketcan-users] socketcan and codesys
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2138">[ date ]</a>
              <a href="thread.html#2138">[ thread ]</a>
              <a href="subject.html#2138">[ subject ]</a>
              <a href="author.html#2138">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
