<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] Detection of CAN frame actually sent?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2010-October/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Detection%20of%20CAN%20frame%20actually%20sent%3F&In-Reply-To=%3C201010131139.31354.alexander.stein%40systec-electronic.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001564.html">
   <LINK REL="Next"  HREF="001558.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] Detection of CAN frame actually sent?</H1>
    <B>Alexander Stein</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Detection%20of%20CAN%20frame%20actually%20sent%3F&In-Reply-To=%3C201010131139.31354.alexander.stein%40systec-electronic.com%3E"
       TITLE="[Socketcan-users] Detection of CAN frame actually sent?">alexander.stein at systec-electronic.com
       </A><BR>
    <I>Wed Oct 13 11:39:31 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001564.html">[Socketcan-users] Detection of CAN frame actually sent?
</A></li>
        <LI>Next message: <A HREF="001558.html">[Socketcan-users] Detection of CAN frame actually sent?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1556">[ date ]</a>
              <a href="thread.html#1556">[ thread ]</a>
              <a href="subject.html#1556">[ subject ]</a>
              <a href="author.html#1556">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 13 October 2010, 11:02:33 you wrote:
&gt;<i> On 10/13/2010 10:19 AM, Marc Kleine-Budde wrote:
</I>&gt;<i> &gt; On 10/13/2010 10:07 AM, Alexander Stein wrote:
</I>&gt;<i> &gt;&gt; Hello,
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; is there a way to detect whether the CAN frame actually was sent on the
</I>&gt;<i> &gt;&gt; bus? I guess the write call on the socket returns immediately and the
</I>&gt;<i> &gt;&gt; data will be buffered in kernel space. The cangen demo also does
</I>&gt;<i> &gt;&gt; optionally a POLLOUT poll on the CAN socket, but I expect this will
</I>&gt;<i> &gt;&gt; only show if there is free buffer available.
</I>&gt;<i> &gt;&gt; So, what can I do to get the information when the frame was sent?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; You can switch the socket to receive it's own messages
</I>&gt;<i> &gt; (&quot;setsockopt(CAN_RAW_RECV_OWN_MSGS)&quot;). There's an ongoing discussion
</I>&gt;<i> &gt; about this on socketcan-core:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; <A HREF="http://old.nabble.com/Self-reception-and-more-td29760073.html">http://old.nabble.com/Self-reception-and-more-td29760073.html</A>
</I>&gt;<i> &gt; <A HREF="http://old.nabble.com/Self-reception-td29932236.html">http://old.nabble.com/Self-reception-td29932236.html</A>
</I>&gt;<i> 
</I>&gt;<i> I'm following the discussion and realized that it will not work for
</I>&gt;<i> devices doing the local loopback in hardware, like the flexcan
</I>&gt;<i> controller. Strictly speaking it will only work properly for drivers
</I>&gt;<i> doing the local loopback in software when the TX done interrupt is
</I>&gt;<i> handled. Also some USB devices are not able to do that properly.
</I>
Thanks for the information so far.
I would need to get this info actually on flexcan hardware. What does it 
actually mean in flexcan hardware? Does it receive it's own message like 
normal ones? Or do they get discarded as they are known to be own messages?
Is there a way to detect if the hardware/driver allows local loopback?

Best regards,
Alexander

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001564.html">[Socketcan-users] Detection of CAN frame actually sent?
</A></li>
	<LI>Next message: <A HREF="001558.html">[Socketcan-users] Detection of CAN frame actually sent?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1556">[ date ]</a>
              <a href="thread.html#1556">[ thread ]</a>
              <a href="subject.html#1556">[ subject ]</a>
              <a href="author.html#1556">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
