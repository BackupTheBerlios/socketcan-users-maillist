<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] Detection of CAN frame actually sent?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2010-October/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Detection%20of%20CAN%20frame%20actually%20sent%3F&In-Reply-To=%3C4CB575A9.3070208%40grandegger.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001547.html">
   <LINK REL="Next"  HREF="001551.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] Detection of CAN frame actually sent?</H1>
    <B>Wolfgang Grandegger</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Detection%20of%20CAN%20frame%20actually%20sent%3F&In-Reply-To=%3C4CB575A9.3070208%40grandegger.com%3E"
       TITLE="[Socketcan-users] Detection of CAN frame actually sent?">wg at grandegger.com
       </A><BR>
    <I>Wed Oct 13 11:02:33 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001547.html">[Socketcan-users] Detection of CAN frame actually sent?
</A></li>
        <LI>Next message: <A HREF="001551.html">[Socketcan-users] Detection of CAN frame actually sent?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1550">[ date ]</a>
              <a href="thread.html#1550">[ thread ]</a>
              <a href="subject.html#1550">[ subject ]</a>
              <a href="author.html#1550">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/13/2010 10:19 AM, Marc Kleine-Budde wrote:
&gt;<i> On 10/13/2010 10:07 AM, Alexander Stein wrote:
</I>&gt;&gt;<i> Hello,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> is there a way to detect whether the CAN frame actually was sent on the bus? I 
</I>&gt;&gt;<i> guess the write call on the socket returns immediately and the data will be 
</I>&gt;&gt;<i> buffered in kernel space. The cangen demo also does optionally a POLLOUT poll 
</I>&gt;&gt;<i> on the CAN socket, but I expect this will only show if there is free buffer 
</I>&gt;&gt;<i> available.
</I>&gt;&gt;<i> So, what can I do to get the information when the frame was sent?
</I>&gt;<i> 
</I>&gt;<i> You can switch the socket to receive it's own messages
</I>&gt;<i> (&quot;setsockopt(CAN_RAW_RECV_OWN_MSGS)&quot;). There's an ongoing discussion
</I>&gt;<i> about this on socketcan-core:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://old.nabble.com/Self-reception-and-more-td29760073.html">http://old.nabble.com/Self-reception-and-more-td29760073.html</A>
</I>&gt;<i> <A HREF="http://old.nabble.com/Self-reception-td29932236.html">http://old.nabble.com/Self-reception-td29932236.html</A>
</I>
I'm following the discussion and realized that it will not work for
devices doing the local loopback in hardware, like the flexcan
controller. Strictly speaking it will only work properly for drivers
doing the local loopback in software when the TX done interrupt is
handled. Also some USB devices are not able to do that properly.

Wolfgang.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001547.html">[Socketcan-users] Detection of CAN frame actually sent?
</A></li>
	<LI>Next message: <A HREF="001551.html">[Socketcan-users] Detection of CAN frame actually sent?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1550">[ date ]</a>
              <a href="thread.html#1550">[ thread ]</a>
              <a href="subject.html#1550">[ subject ]</a>
              <a href="author.html#1550">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
