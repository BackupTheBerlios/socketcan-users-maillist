<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] mscan: RXACT never got cleared
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20mscan%3A%20RXACT%20never%20got%20cleared&In-Reply-To=%3C20091104144924.GC4513%40pengutronix.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001125.html">
   <LINK REL="Next"  HREF="001127.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] mscan: RXACT never got cleared</H1>
    <B>Luotao Fu</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20mscan%3A%20RXACT%20never%20got%20cleared&In-Reply-To=%3C20091104144924.GC4513%40pengutronix.de%3E"
       TITLE="[Socketcan-users] mscan: RXACT never got cleared">l.fu at pengutronix.de
       </A><BR>
    <I>Wed Nov  4 15:49:24 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001125.html">[Socketcan-users] mscan: RXACT never got cleared
</A></li>
        <LI>Next message: <A HREF="001127.html">[Socketcan-users] mscan: RXACT never got cleared
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1126">[ date ]</a>
              <a href="thread.html#1126">[ thread ]</a>
              <a href="subject.html#1126">[ subject ]</a>
              <a href="author.html#1126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Wed, Nov 04, 2009 at 03:25:16PM +0100, Wolfgang Grandegger wrote:
&gt;<i> Wolfgang Grandegger wrote:
</I>&gt;<i> &gt; Luotao Fu wrote:
</I>&gt;<i> &gt;&gt; Hi Wolfgang,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Wed, Nov 04, 2009 at 09:30:18AM +0100, Wolfgang Grandegger wrote:
</I>&gt;<i> &gt;&gt;&gt; Luotao Fu wrote:
</I>....
&gt;<i> &gt; 
</I>&gt;<i> &gt; As I already said, I use an old MPC5200 (without *B*). Will try later
</I>&gt;<i> &gt; today with a MPC5200B.
</I>&gt;<i> 
</I>&gt;<i> I switched to &quot;MPC5200B v2.2, Core v1.4 at 396 MHz&quot; and the problem does
</I>&gt;<i> *not* show up any more. Before I used a &quot;MPC5200 v1.2, Core v1.1 at 396
</I>&gt;<i> MHz&quot;. Now I remember vaguely, that I was indeed fighting with this
</I>&gt;<i> strange behavior.
</I>
Ah, great to get confirmation that I was not hallucinating :-). It
indeed took me some time to sort out what was going wrong in this
strange issue. We shall probably ask freescale if this issue is konwn.
BTW. I just checked the datasheet of mpc5200. The slprq should always
acked, just like in mpc5200b, and otherwise the controller should be in
idle mode with slprq set. It looks really strange that your mpc5200
board works properly without being able to get the slpack. Could you do
some more inspection on this one by occassion (don't have a mpc5200
board here)?

&gt;<i> The manual instructs to enter sleep mode first and thereafter the init
</I>&gt;<i> mode, but as that did'nt work, sleep and init are set in one step.
</I>
Well, usually it works already. In case of a failed slprq the we now
just force the init.

&gt;<i> Maybe we simply do s/dev_err/dev_dbg/. What do you think?
</I>&gt;<i> 
</I>
Fail to enter sleep mode could indeed be a trouble. I personally would
prefer a dev_err here, since it's nevertheless a little hacky here. In
the end the message would not appear to frequently since it occures only
when we (re)initialize the interface, so it should not be too annoying.

cheers
Luotao Fu
-- 
Pengutronix e.K.                           | Dipl.-Ing. Luotao Fu        |
Industrial Linux Solutions                 | <A HREF="http://www.pengutronix.de/">http://www.pengutronix.de/</A>  |
Peiner Str. 6-8, 31137 Hildesheim, Germany | Phone: +49-5121-206917-0    |
Amtsgericht Hildesheim, HRA 2686           | Fax:   +49-5121-206917-5555 |
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/socketcan-users/attachments/20091104/a40113fb/attachment.pgp">https://lists.berlios.de/pipermail/socketcan-users/attachments/20091104/a40113fb/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001125.html">[Socketcan-users] mscan: RXACT never got cleared
</A></li>
	<LI>Next message: <A HREF="001127.html">[Socketcan-users] mscan: RXACT never got cleared
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1126">[ date ]</a>
              <a href="thread.html#1126">[ thread ]</a>
              <a href="subject.html#1126">[ subject ]</a>
              <a href="author.html#1126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
