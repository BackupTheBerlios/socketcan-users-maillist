<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] [RFC] [ANNOUNCEMENT] libsocketcan-nl
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20%5BRFC%5D%20%5BANNOUNCEMENT%5D%20libsocketcan-nl&In-Reply-To=%3C20091126123705.GC5173%40pengutronix.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001159.html">
   <LINK REL="Next"  HREF="001161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] [RFC] [ANNOUNCEMENT] libsocketcan-nl</H1>
    <B>Luotao Fu</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20%5BRFC%5D%20%5BANNOUNCEMENT%5D%20libsocketcan-nl&In-Reply-To=%3C20091126123705.GC5173%40pengutronix.de%3E"
       TITLE="[Socketcan-users] [RFC] [ANNOUNCEMENT] libsocketcan-nl">l.fu at pengutronix.de
       </A><BR>
    <I>Thu Nov 26 13:37:15 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001159.html">[Socketcan-users] [RFC] [ANNOUNCEMENT] libsocketcan-nl
</A></li>
        <LI>Next message: <A HREF="001161.html">[Socketcan-users] [RFC] [ANNOUNCEMENT] libsocketcan-nl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1160">[ date ]</a>
              <a href="thread.html#1160">[ thread ]</a>
              <a href="subject.html#1160">[ subject ]</a>
              <a href="author.html#1160">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Thu, Nov 26, 2009 at 01:09:55PM +0100, Wolfgang Grandegger wrote:
&gt;<i> Wolfgang Grandegger wrote:
</I>&gt;<i> &gt; Hi Fu,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Luotao Fu wrote:
</I>&gt;<i> &gt;&gt; Hi Vlasdiv,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Wed, Nov 25, 2009 at 06:30:07PM +0100, <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">gribov at ixxat.de</A> wrote:
</I>&lt;snip&gt;
&gt;<i> &gt;&gt;&gt; Such a user space component can make things really easier for me, as a 
</I>&gt;<i> &gt;&gt;&gt; CANopen SW maintainer under SocketCAN. If I can use someuser space
</I>&gt;<i> &gt;&gt;&gt; library
</I>&gt;<i> &gt;&gt;&gt; &quot;libsocketcan&quot; to:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; - start/stop CAN
</I>&gt;<i> &gt;&gt; yeah, start with
</I>&gt;<i> &gt;&gt; scan_do_restart(const char* name)
</I>&gt;<i> &gt;&gt; stop alias driving down the interface is there but used as static, I'll
</I>&gt;<i> &gt;&gt; make a wrapper with proper name for this.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hm, the name &quot;restart&quot; is somehow reserved for bus-off recovery. Even if
</I>&gt;<i> &gt; the name is not well chosen, we should use another name for down/up,
</I>&gt;<i> &gt; e.g. scan_do_down_up() to make that clear, if we need that at all. Or
</I>&gt;<i> &gt; have I missed something?
</I>&gt;<i> 
</I>&gt;<i> Just looked to the code. scan_do_restart() just does the bus-off
</I>&gt;<i> recovery if appropriate. But I realized that the scan_set_* functions do
</I>&gt;<i>  stop the device before setting the property. That's dangerous and error
</I>&gt;<i> prune and therefore we did not allow it in the kernel. It's up to the
</I>&gt;<i> user/application to handle up/down properly.
</I>
Certain things like set_bitrate or ctrlmode are anyway not allowed while
the device is up and running. I think that it's a question of policy,
that we if we take care of if_up down in the library or let the user do
it in the application. imho if an application is allowed to change bitrate
while there're communication running, the application is all the way
errnoues, it won't help much to put the if_up/down into the application.
I personally prefer to hide these things from user. Since the usage is
this way much simpler. Another possiblitiy is to expose two kind of
_set functions, one is in the way of do-it-yourself, where the library
relies on that the user has put off the device prioly. The other is the
way &quot;we-do-it-for-you&quot;, as we have now.

&gt;<i> Furthermore, these
</I>&gt;<i> functions seem to start the device even if it was not up before.
</I>&gt;<i> 
</I>
good point, I didn't thought about this, will add a verification into
that.

Thanks for reviewing

cheers
Fu
-- 
Pengutronix e.K.                           | Dipl.-Ing. Luotao Fu        |
Industrial Linux Solutions                 | <A HREF="http://www.pengutronix.de/">http://www.pengutronix.de/</A>  |
Peiner Str. 6-8, 31137 Hildesheim, Germany | Phone: +49-5121-206917-0    |
Amtsgericht Hildesheim, HRA 2686           | Fax:   +49-5121-206917-5555 |
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/socketcan-users/attachments/20091126/266fe8af/attachment.pgp">https://lists.berlios.de/pipermail/socketcan-users/attachments/20091126/266fe8af/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001159.html">[Socketcan-users] [RFC] [ANNOUNCEMENT] libsocketcan-nl
</A></li>
	<LI>Next message: <A HREF="001161.html">[Socketcan-users] [RFC] [ANNOUNCEMENT] libsocketcan-nl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1160">[ date ]</a>
              <a href="thread.html#1160">[ thread ]</a>
              <a href="subject.html#1160">[ subject ]</a>
              <a href="author.html#1160">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
