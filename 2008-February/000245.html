<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Mscan%3A%20BUG%21%20Tx%20Ring%20full%20when%20queue%20awake%21&In-Reply-To=%3CDD39B5C3F4963040ADC9768BE7E430CB02AAE55D%40is-hdq-exchange.marel.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000244.html">
   <LINK REL="Next"  HREF="000246.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!</H1>
    <B>Daniel Schnell</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Mscan%3A%20BUG%21%20Tx%20Ring%20full%20when%20queue%20awake%21&In-Reply-To=%3CDD39B5C3F4963040ADC9768BE7E430CB02AAE55D%40is-hdq-exchange.marel.net%3E"
       TITLE="[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!">daniel.schnell at marel.com
       </A><BR>
    <I>Fri Feb  1 18:16:04 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000244.html">[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!
</A></li>
        <LI>Next message: <A HREF="000246.html">[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#245">[ date ]</a>
              <a href="thread.html#245">[ thread ]</a>
              <a href="subject.html#245">[ subject ]</a>
              <a href="author.html#245">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wolfgang Grandegger wrote:
&gt;&gt;<i> 
</I>&gt;&gt;<i> And here is the output (I enabled printk timing output as well)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> [  150.234031] mpc52xx-mscan mpc52xx-mscan.0: BUG! Tx Ring full when
</I>&gt;&gt;<i> queue awake! [  150.241462] mscan_hard_start_xmit:can0: flags=0x3
</I>&gt;&gt;<i> active=0x7 pri=69 start=-149776 jiffies=-149769 [  151.713983]
</I>&gt;&gt;<i> NETDEV WATCHDOG: can0: transmit timed out [ 151.719163]
</I>&gt;&gt;<i> mscan_tx_timeout 
</I>&gt;<i> 
</I>&gt;<i> OK, that means that the timeout happens because of the BUG. I guess
</I>&gt;<i> that no more messages will get out thereafter. 
</I>
Well If we try to send it after max. 650 ms it will work again .... 

Or using cansend afterwards works also. So the queue seems not to be
totally lost.

Ciao,
Daniel Schnell.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000244.html">[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!
</A></li>
	<LI>Next message: <A HREF="000246.html">[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#245">[ date ]</a>
              <a href="thread.html#245">[ thread ]</a>
              <a href="subject.html#245">[ subject ]</a>
              <a href="author.html#245">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
