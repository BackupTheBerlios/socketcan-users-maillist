<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Mscan%3A%20BUG%21%20Tx%20Ring%20full%20when%20queue%20awake%21&In-Reply-To=%3CDD39B5C3F4963040ADC9768BE7E430CB02AF4D32%40is-hdq-exchange.marel.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000279.html">
   <LINK REL="Next"  HREF="000281.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!</H1>
    <B>Daniel Schnell</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Mscan%3A%20BUG%21%20Tx%20Ring%20full%20when%20queue%20awake%21&In-Reply-To=%3CDD39B5C3F4963040ADC9768BE7E430CB02AF4D32%40is-hdq-exchange.marel.net%3E"
       TITLE="[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!">daniel.schnell at marel.com
       </A><BR>
    <I>Thu Feb  7 14:41:34 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000279.html">[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!
</A></li>
        <LI>Next message: <A HREF="000281.html">[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#280">[ date ]</a>
              <a href="thread.html#280">[ thread ]</a>
              <a href="subject.html#280">[ subject ]</a>
              <a href="author.html#280">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Wolfgang,

Spinlocks patch applied: still no change.

I am investigating our watchdog behaviour. There doesn't seem to happen
much unexpected. Some in_8's and out_8's to some GPIO line several times
a second to keep the external watchdog happy.

But it will restart the timer every time it expires. Do you know in
which tasks the timers are handled and which RT prio they get ? Maybe
any correlation with netdev or mscan timers ? Maybe some spinlocks
missing ?

Best regards,

Daniel.



Wolfgang Grandegger wrote:
&gt;<i> Daniel Schnell wrote:
</I>&gt;&gt;<i> Wolfgang Grandegger wrote:
</I>&gt;&gt;&gt;<i> Yes, as expected. It confirms the problem that 3 TX messages are
</I>&gt;&gt;&gt;<i> pending and the upper layer is still allowed to send more. But I'm
</I>&gt;&gt;&gt;<i> still puzzled why. I have a new patch adding spin lock irq
</I>&gt;&gt;&gt;<i> protection. 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hmm,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> This patch doesn't contain any spinlocks ...
</I>&gt;<i> 
</I>&gt;<i> Shame on me, again the wrong patch.
</I>&gt;<i> 
</I>&gt;<i> Wolfgang-
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000279.html">[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!
</A></li>
	<LI>Next message: <A HREF="000281.html">[Socketcan-users] Mscan: BUG! Tx Ring full when queue awake!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#280">[ date ]</a>
              <a href="thread.html#280">[ thread ]</a>
              <a href="subject.html#280">[ subject ]</a>
              <a href="author.html#280">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
