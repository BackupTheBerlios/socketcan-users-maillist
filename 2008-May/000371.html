<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] RT - Socketcan
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20RT%20-%20Socketcan&In-Reply-To=%3C482B8494.7050009%40das.ufsc.br%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000370.html">
   <LINK REL="Next"  HREF="000372.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] RT - Socketcan</H1>
    <B>Breno</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20RT%20-%20Socketcan&In-Reply-To=%3C482B8494.7050009%40das.ufsc.br%3E"
       TITLE="[Socketcan-users] RT - Socketcan">breno at das.ufsc.br
       </A><BR>
    <I>Thu May 15 02:32:20 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000370.html">[Socketcan-users] LIN bus
</A></li>
        <LI>Next message: <A HREF="000372.html">[Socketcan-users] RT - Socketcan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#371">[ date ]</a>
              <a href="thread.html#371">[ thread ]</a>
              <a href="subject.html#371">[ subject ]</a>
              <a href="author.html#371">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all, I have my socket can working properly and all application inside 
can-utils dir are working out.
Now, I want to use the rt - socket can and at long last I got the 
rtcansend, rtcanrecv and rtcanconfig compiled on my system.

Unfortunately when I try to run those applications some errors appeared. 
I posted below the errors message and messages from boot process:


[ 0.000000] Kernel command line: root=/dev/nfs rw 
nfsroot=192.168.1.100:/home/breno/ELDK/ppc_6xx 
ip=192.168.1.101:192.168.1.100:192.168.1.100:255.255.255.0:icecube::off 
console=ttyPSC0,115200 init 1 noinitrd
[ 0.000000] MPC52xx PIC is up and running!
[ 0.000000] PID hash table entries: 256 (order: 8, 1024 bytes)
[ 0.000015] clocksource: timebase mult[79364d9] shift[22] registered
[ 0.000621] I-pipe 2.1-01: pipeline enabled.
[ 0.000856] console [ttyPSC0] enabled
[ 0.094725] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[ 0.102251] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[ 0.118333] Memory: 61808k/65536k available (2644k kernel code, 3660k 
reserved, 132k data, 252k bss, 156k init)
[ 0.128816] SLUB: Genslabs=11, HWalign=32, Order=0-1, MinObjects=4, 
CPUs=1, Nodes=1
[ 0.229098] Mount-cache hash table entries: 512
[ 0.238062] net_namespace: 64 bytes
[ 0.243962] NET: Registered protocol family 16
[ 0.270293] PCI: Probing PCI hardware
[ 0.276232] DMA: MPC52xx BestComm driver
[ 0.280666] DMA: MPC52xx BestComm engine @f0001200 ok !
[ 0.299894] SCSI subsystem initialized
[ 0.323939] Time: timebase clocksource has been installed.
[ 0.332293] NET: Registered protocol family 2
[ 0.376363] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[ 0.384780] TCP established hash table entries: 2048 (order: 2, 16384 bytes)
[ 0.392249] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
[ 0.398904] TCP: Hash tables configured (established 2048 bind 2048)
[ 0.405454] TCP reno registered
[ 0.423424] I-pipe: Domain Xenomai registered.
[ 0.428093] Xenomai: hal/powerpc started.
[ 0.452354] Xenomai: real-time nucleus v2.4.3 (Back to Shalla-Bal) loaded.
[ 0.460259] Xenomai: starting native API services.
[ 0.465261] Xenomai: starting POSIX services.
[ 0.470003] Xenomai: starting RTDM services.
[ 0.515319] io scheduler noop registered
[ 0.519433] io scheduler anticipatory registered (default)
[ 0.525208] io scheduler deadline registered
[ 0.529868] io scheduler cfq registered
[ 0.961543] Serial: MPC52xx PSC UART driver
[ 0.966818] f0002000.serial: ttyPSC0 at MMIO 0xf0002000 (irq = 129) is a 
MPC52xx PSC
[ 0.986052] RAMDISK driver initialized: 16 RAM disks of 32768K size 1024 
blocksize
[ 0.999085] loop: module loaded
[ 1.003911] mpc52xx-mscan initializing
[ 1.010346] mpc52xx-mscan mpc52xx-mscan.0: probe for a port 0xC500A900 done
[ 1.019625] mpc52xx-mscan mpc52xx-mscan.1: probe for a port 0xC500C980 done
[ 1.062078] mpc52xx MII bus: probed
[ 1.069223] ata: MPC52xx IDE/ATA libata driver
[ 1.075353] scsi0 : mpc52xx_ata
[ 1.079406] ata1: PATA max PIO4 ata_regs 0xf0003a00 irq 135
[ 1.251310] RT-Socket-CAN 0.90.2 - (C) 2006 RT-Socket-CAN Development Team
[ 1.258614] MSCAN: CAN 1 and 2 routed to PSC2 pins
[ 1.263767] rtcan: registered rtcan0
[ 1.267527] rtcan0: MSCAN driver loaded (port 1, base-addr 0xf0000900 
irq 145)
[ 1.275147] rtcan: registered rtcan1
[ 1.278899] rtcan1: MSCAN driver loaded (port 2, base-addr 0xf0000980 
irq 146)
[ 1.286819] TCP cubic registered
[ 1.290220] Initializing XFRM netlink socket
[ 1.295708] NET: Registered protocol family 1
[ 1.300348] NET: Registered protocol family 17
[ 1.305001] can: controller area network core (rev 20071116 abi 8)
[ 1.311598] NET: Registered protocol family 29
[ 1.317995] RPC: Registered udp transport module.
[ 1.322901] RPC: Registered tcp transport module.
[ 1.328163] drivers/rtc/hctosys.c: unable to open rtc device (rtc0)
[ 1.842029] net eth0: attached phy 0 to driver LXT971
[ 2.848274] IP-Config: Complete:
[ 2.851411] device=eth0, addr=192.168.1.101, mask=255.255.255.0, 
gw=192.168.1.100,
[ 2.859759] host=icecube, domain=, nis-domain=(none),
[ 2.865427] bootserver=192.168.1.100, rootserver=192.168.1.100, rootpath=
[ 2.873718] Looking up port of RPC 100003/2 on 192.168.1.100
Telling INIT to go to single user mode.

INIT: Going single user


INIT: Sending processes the TERM signal

sh-3.00# ls

bin dev etc home images lib mnt opt proc root sbin tmp usr var
sh-3.00# cd home/breno/Desktop/rt-can-utils/

sh-3.00# ./rtcanconfig rtcan0 -b 1000000
sh-3.00# ./rtcanconfig rtcan1 -b 1000000
sh-3.00# ifconfig can0 up
sh-3.00# ifconfig can1 up
sh-3.00# ./rtcansend can0 ABCDEFG
rt_dev_ioctl: No such device
sh-3.00# ./rtcansend can1 ABCDEFG
rt_dev_ioctl: No such device
sh-3.00# ./rtcansend rtcan0 ABCDEFG
rt_dev_send: Network is down
sh-3.00# ./rtcansend rtcan0 ABCDEFG
rt_dev_send: Network is down


On my kernel options I have:

Real-time sub-system ---&gt; Drivers ---&gt; CAN drivers [*] RT-Socket-CAN, 
CAN raw socket interface
Pin Configuration (CAN 1 and 2 on PSC2 pins) ---&gt; (X) CAN 1 and 2 on 
PSC2 pins

Networking ---&gt; [*] CAN bus subsystem support ---&gt; CAN Device Drivers 
---&gt; [*] Support for a Freescale MSCAN based chips
[*] Freescale MPC5200 onboard controller

Thats' all option I have enable related with CAN interface. Dis I miss 
anything?

Thanks in advance,

Breno



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000370.html">[Socketcan-users] LIN bus
</A></li>
	<LI>Next message: <A HREF="000372.html">[Socketcan-users] RT - Socketcan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#371">[ date ]</a>
              <a href="thread.html#371">[ thread ]</a>
              <a href="subject.html#371">[ subject ]</a>
              <a href="author.html#371">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
