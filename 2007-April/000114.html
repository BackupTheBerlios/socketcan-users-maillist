<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] socketcan on 2.6.13 kernel
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20socketcan%20on%202.6.13%20kernel&In-Reply-To=%3C46263B94.8090408%40hartkopp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000113.html">
   <LINK REL="Next"  HREF="000115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] socketcan on 2.6.13 kernel</H1>
    <B>Oliver Hartkopp</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20socketcan%20on%202.6.13%20kernel&In-Reply-To=%3C46263B94.8090408%40hartkopp.net%3E"
       TITLE="[Socketcan-users] socketcan on 2.6.13 kernel">socketcan at hartkopp.net
       </A><BR>
    <I>Wed Apr 18 17:39:00 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000113.html">[Socketcan-users] socketcan on 2.6.13 kernel
</A></li>
        <LI>Next message: <A HREF="000115.html">[Socketcan-users] socketcan on 2.6.13 kernel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#114">[ date ]</a>
              <a href="thread.html#114">[ thread ]</a>
              <a href="subject.html#114">[ subject ]</a>
              <a href="author.html#114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">simon.kallweit at intefo.ch</A> wrote:
&gt;<i> hello
</I>&gt;<i>
</I>&gt;<i> i'm trying to get socketcan running on a 2.6.13 kernel. first, i had to 
</I>&gt;<i> backport the kzalloc() and skb_get/set_timestamp() functions.
</I>
oops! I expected the code to work at least down to 2.6.12 ...
I added some Kernel version depended code to fix the kzalloc() and 
skb_[sg]et_timestamp() stuff for your Kernel version.

Btw. My 'make KERNELDIR=/usr/src/linux-2.6.12' says something from an 
unknown &quot;sk_set_owner&quot; symbol. Hm.

Regarding your segmentation fault
&gt;<i> kernel BUG at include/linux/module.h:357!
</I>&gt;<i> Unable to handle kernel NULL pointer dereference at virtual address 00000000
</I>&gt;<i> (..)
</I>&gt;<i> Process candump (pid: 213, stack limit = 0xc1dec194)
</I>&gt;<i> (..)
</I>&gt;<i> Backtrace:
</I>&gt;<i> [&lt;c0020e94&gt;] (__bug+0x0/0x54) from [&lt;c0146094&gt;] (sk_alloc+0xa0/0xf8)
</I>&gt;<i>  r4 = C1FD0200
</I>&gt;<i> [&lt;c0145ff4&gt;] (sk_alloc+0x0/0xf8) from [&lt;bf024388&gt;] 
</I>&gt;<i> (can_create+0xe8/0x1bc [can])
</I>&gt;<i> (..)
</I>i assume the problem to be in can_create() in af_can.c.
This function is called, when the socket is opened (e.g. in this case 
from 'candump').

Maybe there is something wrong in the Version dependend stuff for your 
relatively old Kernel version. I'll check these both points tomorrow 
morning ...

Best regards,
Oliver



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000113.html">[Socketcan-users] socketcan on 2.6.13 kernel
</A></li>
	<LI>Next message: <A HREF="000115.html">[Socketcan-users] socketcan on 2.6.13 kernel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#114">[ date ]</a>
              <a href="thread.html#114">[ thread ]</a>
              <a href="subject.html#114">[ subject ]</a>
              <a href="author.html#114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
