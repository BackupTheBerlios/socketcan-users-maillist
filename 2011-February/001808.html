<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] sja1000 can controller in a kernel 2.6.25
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2011-February/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20sja1000%20can%20controller%20in%20a%20kernel%202.6.25&In-Reply-To=%3CAB277FB27524F74C87ACAFF84F2767490D459C6082%40NTMBOX.central.cirsa.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001805.html">
   <LINK REL="Next"  HREF="001791.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] sja1000 can controller in a kernel 2.6.25</H1>
    <B>Jorge Fernandez Monteagudo</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20sja1000%20can%20controller%20in%20a%20kernel%202.6.25&In-Reply-To=%3CAB277FB27524F74C87ACAFF84F2767490D459C6082%40NTMBOX.central.cirsa.com%3E"
       TITLE="[Socketcan-users] sja1000 can controller in a kernel 2.6.25">jorgefm at cirsa.com
       </A><BR>
    <I>Mon Feb 28 14:34:10 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001805.html">[Socketcan-users] sja1000 can controller in a kernel 2.6.25
</A></li>
        <LI>Next message: <A HREF="001791.html">[Socketcan-users] &quot;ifconfig slcan0 up&quot; fails on Ubuntu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1808">[ date ]</a>
              <a href="thread.html#1808">[ thread ]</a>
              <a href="subject.html#1808">[ subject ]</a>
              <a href="author.html#1808">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> -----Mensaje original-----
</I>&gt;<i> De: Wolfgang Grandegger [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">wg at grandegger.com</A>]
</I>&gt;<i> Enviado el: Monday, February 28, 2011 1:10 PM
</I>&gt;<i> Para: Jorge Fernandez Monteagudo
</I>&gt;<i> CC: <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">socketcan-users at lists.berlios.de</A>
</I>&gt;<i> Asunto: Re: [Socketcan-users] sja1000 can controller in a kernel 2.6.25
</I>&gt;<i>
</I>&gt;<i> On 02/28/2011 11:33 AM, Jorge Fernandez Monteagudo wrote:
</I>&gt;<i> &gt;&gt; -----Mensaje original-----
</I>&gt;<i> &gt;&gt; De: Wolfgang Grandegger [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">wg at grandegger.com</A>]
</I>&gt;<i> &gt;&gt; Enviado el: Friday, February 25, 2011 8:24 PM
</I>&gt;<i> &gt;&gt; Para: Jorge Fernandez Monteagudo
</I>&gt;<i> &gt;&gt; CC: <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">socketcan-users at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; Asunto: Re: [Socketcan-users] sja1000 can controller in a kernel
</I>&gt;<i> 2.6.25
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Hi,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On 02/25/2011 03:00 PM, Jorge Fernandez Monteagudo wrote:
</I>&gt;<i> &gt;&gt;&gt; Hi all,
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I would like to know if there is some way to backport the sja1000
</I>&gt;<i> &gt;&gt; driver to an old
</I>&gt;<i> &gt;&gt;&gt; kernel, the 2.6.25. I've found some basic can network architecture
</I>&gt;<i> &gt;&gt; inside (the
</I>&gt;<i> &gt;&gt;&gt; drivers/net/can directory, only with vcan.c, the net/can directory)
</I>&gt;<i> &gt;&gt; I've read
</I>&gt;<i> &gt;&gt;&gt; the initial sja1000 support was 2.6.31. Then, I'll need to add an
</I>&gt;<i> &gt;&gt; interface
</I>&gt;<i> &gt;&gt;&gt; file in order to get access to the sja1000 because in my hardware
</I>&gt;<i> is
</I>&gt;<i> &gt;&gt; inside
</I>&gt;<i> &gt;&gt;&gt; a FPGA.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; The Socket-CAN-Version of the SVN-Repository at BerliOS [1,2]
</I>&gt;<i> &gt;&gt; supports 2.6.25. I can easily be built out-of-tree.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Wolfgang.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; [1] <A HREF="http://developer.berlios.de/projects/socketcan/">http://developer.berlios.de/projects/socketcan/</A>
</I>&gt;<i> &gt;&gt; [2] <A HREF="http://svn.berlios.de/wsvn/socketcan/trunk/README">http://svn.berlios.de/wsvn/socketcan/trunk/README</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Oops, it's seems there is some problems...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; # make KERNELDIR=/usr/src/linux-2.6.25
</I>&gt;<i> &gt; make -C /usr/src/linux-2.6.25 M=/opt/socketcan/kernel/2.6 modules
</I>&gt;<i> TOPDIR=/opt/socketcan/kernel/2.6
</I>&gt;<i> &gt; make[1]: Entering directory `/usr/src/linux-2.6.25'
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   WARNING: Symbol version dump /usr/src/linux-2.6.25/Module.symvers
</I>&gt;<i> &gt;            is missing; modules will have no dependencies and
</I>&gt;<i> modversions.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   CC [M]  /opt/socketcan/kernel/2.6/drivers/net/can/vcan.o
</I>&gt;<i> &gt;   CC [M]  /opt/socketcan/kernel/2.6/drivers/net/can/slcan.o
</I>&gt;<i> &gt;   CC [M]  /opt/socketcan/kernel/2.6/drivers/net/can/dev.o
</I>&gt;<i> &gt;   LD [M]  /opt/socketcan/kernel/2.6/drivers/net/can/can-dev.o
</I>&gt;<i> &gt;   CC [M]  /opt/socketcan/kernel/2.6/drivers/net/can/esd_pci331.o
</I>&gt;<i> &gt;   CC [M]  /opt/socketcan/kernel/2.6/drivers/net/can/mcp251x.o
</I>&gt;<i> &gt;   CC [M]  /opt/socketcan/kernel/2.6/drivers/net/can/cc770/cc770.o
</I>&gt;<i> &gt;   CC [M]  /opt/socketcan/kernel/2.6/drivers/net/can/cc770/cc770_isa.o
</I>&gt;<i> &gt;   CC [M]  /opt/socketcan/kernel/2.6/drivers/net/can/sja1000/sja1000.o
</I>&gt;<i> &gt;   CC [M]
</I>&gt;<i> /opt/socketcan/kernel/2.6/drivers/net/can/sja1000/sja1000_platform.o
</I>&gt;<i> &gt;
</I>&gt;<i> /opt/socketcan/kernel/2.6/drivers/net/can/sja1000/sja1000_platform.c:38
</I>&gt;<i> :2: error: #error This driver does not support Kernel versions &lt; 2.6.27
</I>&gt;<i> &gt; /opt/socketcan/kernel/2.6/drivers/net/can/sja1000/sja1000_platform.c:
</I>&gt;<i> In function &#8216;sp_probe&#8217;:
</I>&gt;<i> &gt;
</I>&gt;<i> /opt/socketcan/kernel/2.6/drivers/net/can/sja1000/sja1000_platform.c:78
</I>&gt;<i> : error: implicit declaration of function &#8216;resource_size&#8217;
</I>&gt;<i> &gt; make[4]: ***
</I>&gt;<i> [/opt/socketcan/kernel/2.6/drivers/net/can/sja1000/sja1000_platform.o]
</I>&gt;<i> Error 1
</I>&gt;<i> &gt; make[3]: *** [/opt/socketcan/kernel/2.6/drivers/net/can/sja1000]
</I>&gt;<i> Error 2
</I>&gt;<i> &gt; make[2]: *** [/opt/socketcan/kernel/2.6/drivers/net/can] Error 2
</I>&gt;<i> &gt; make[1]: *** [_module_/opt/socketcan/kernel/2.6] Error 2
</I>&gt;<i> &gt; make[1]: Leaving directory `/usr/src/linux-2.6.25'
</I>&gt;<i> &gt; make: *** [modules] Error 2
</I>&gt;<i>
</I>&gt;<i> Not all drivers are supported for 2.6.25. Do you need the
</I>&gt;<i> sja1000_platform driver. Just try building with &quot;make -k&quot; or adapt the
</I>&gt;<i> default config in the Makefile.
</I>&gt;<i>
</I>&gt;<i> Wolfgang.
</I>
Yes, I've just commented out the export CONFIG_SJA1000_PLATFORM=m from
Makefile. Now, it just compile.

Jorge

Este mensaje se dirige exclusivamente a su destinatario y puede contener informaci&#243;n privilegiada o CONFIDENCIAL. Si no es vd. el destinatario indicado, queda notificado de que la utilizaci&#243;n, divulgaci&#243;n y/o copia sin autorizaci&#243;n est&#225; prohibida en virtud de la legislaci&#243;n vigente. Si ha recibido este mensaje por error, le rogamos que nos lo comunique inmediatamente por esta misma v&#237;a y proceda a su destrucci&#243;n.

This message is intended exclusively for its addressee and may contain information that is CONFIDENTIAL and protected by professional privilege.
If you are not the intended recipient you are hereby notified that any dissemination, copy or disclosure of this communication is strictly prohibited by law. If this message has been received in error, please immediately notify us via e-mail and delete it.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001805.html">[Socketcan-users] sja1000 can controller in a kernel 2.6.25
</A></li>
	<LI>Next message: <A HREF="001791.html">[Socketcan-users] &quot;ifconfig slcan0 up&quot; fails on Ubuntu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1808">[ date ]</a>
              <a href="thread.html#1808">[ thread ]</a>
              <a href="subject.html#1808">[ subject ]</a>
              <a href="author.html#1808">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
