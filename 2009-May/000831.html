<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] Socketcan hangs at mod 64K packets received	packets
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Socketcan%20hangs%20at%20mod%2064K%20packets%20received%0A%09packets&In-Reply-To=%3C56E1951C7943BE4AA18946742D10FD8D13E630D795%40MSXHOME.rack.racksaver.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000830.html">
   <LINK REL="Next"  HREF="000832.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] Socketcan hangs at mod 64K packets received	packets</H1>
    <B>Stephen Hellriegel</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Socketcan%20hangs%20at%20mod%2064K%20packets%20received%0A%09packets&In-Reply-To=%3C56E1951C7943BE4AA18946742D10FD8D13E630D795%40MSXHOME.rack.racksaver.com%3E"
       TITLE="[Socketcan-users] Socketcan hangs at mod 64K packets received	packets">Stephen.Hellriegel at verari.com
       </A><BR>
    <I>Sun May 10 17:05:58 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000830.html">[Socketcan-users] slcand daemon available in SocketCAN SVN - was Re: slcan_attach and resetting line disciplines
</A></li>
        <LI>Next message: <A HREF="000832.html">[Socketcan-users] Socketcan hangs at mod 64K packets received packets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#831">[ date ]</a>
              <a href="thread.html#831">[ thread ]</a>
              <a href="subject.html#831">[ subject ]</a>
              <a href="author.html#831">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
We are using a stack composed of
Linux 2.6.28 (on an AMD Geode LX800)
Socketcan (head and last few versions)

4 slcan devices which implement a USB-&gt;CAN converter.
The device presents as a full speed (12mbit) generic serial converter to linux.
We use udev rules to map the device to a fixed name to avoid ttyUSBX port movement.
            The converter has passed millions of packets in a diagnostic test without socketcan layered on it.

We use the slcand (recently committed back to the community ;) ) to bring up our interfaces. Along with some magic sauce that Oliver is previewing which allows us to define which slc number a connection gets.

However, when we run a test which moves a lot of data (at a low rate), we find that every mod 64K received packets, the socketcan layer appears to lock up.  The odd thing is, if we inject a packet onto the network from another master, then data starts flowing again.

Has anyone else seen their network stop? If so, can you ifconfig your interface and see if the rx_packets is 65535 or some multiple of 64K minus one?

Any suggestions would be appreciated.

Thanks in advance!
-Steve

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/socketcan-users/attachments/20090510/8adff7f6/attachment.html">https://lists.berlios.de/pipermail/socketcan-users/attachments/20090510/8adff7f6/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000830.html">[Socketcan-users] slcand daemon available in SocketCAN SVN - was Re: slcan_attach and resetting line disciplines
</A></li>
	<LI>Next message: <A HREF="000832.html">[Socketcan-users] Socketcan hangs at mod 64K packets received packets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#831">[ date ]</a>
              <a href="thread.html#831">[ thread ]</a>
              <a href="subject.html#831">[ subject ]</a>
              <a href="author.html#831">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
