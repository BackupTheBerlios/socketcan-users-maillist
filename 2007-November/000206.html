<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] IOCTL SocketCan Rev. 399 and sja1000-iomem
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20IOCTL%20SocketCan%20Rev.%20399%20and%20sja1000-iomem&In-Reply-To=%3C474F1069.9020701%40hartkopp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000205.html">
   <LINK REL="Next"  HREF="000207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] IOCTL SocketCan Rev. 399 and sja1000-iomem</H1>
    <B>Oliver Hartkopp</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20IOCTL%20SocketCan%20Rev.%20399%20and%20sja1000-iomem&In-Reply-To=%3C474F1069.9020701%40hartkopp.net%3E"
       TITLE="[Socketcan-users] IOCTL SocketCan Rev. 399 and sja1000-iomem">socketcan at hartkopp.net
       </A><BR>
    <I>Thu Nov 29 20:18:01 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000205.html">[Socketcan-users] IOCTL SocketCan Rev. 399 and sja1000-iomem
</A></li>
        <LI>Next message: <A HREF="000207.html">[Socketcan-users] IOCTL SocketCan Rev. 399 and sja1000-iomem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#206">[ date ]</a>
              <a href="thread.html#206">[ thread ]</a>
              <a href="subject.html#206">[ subject ]</a>
              <a href="author.html#206">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kai Riedmann wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> at the moment I'm trying to write a software for switching baud rates
</I>&gt;<i> when socketcan already has started working. When executing this code:
</I>&gt;<i>
</I>&gt;<i> struct ifreq ifrSet;
</I>&gt;<i> unsigned long* br = (unsigned long*) &amp;ifrSet.ifr_ifru;
</I>&gt;<i> *br = 0x04;
</I>&gt;<i>
</I>&gt;<i> strcpy( ifrSet.ifr_name, &quot;can0&quot; );
</I>&gt;<i> if(ioctl( can_socket, SIOCSCANBAUDRATE, &amp;ifrSet ) &lt; 0)
</I>&gt;<i>         perror( &quot;SIOCSCANBAUDRATE&quot; );
</I>&gt;<i>         
</I>&gt;<i> the baudrate should be changed of the sja1000-Chip but it doesn't work,
</I>&gt;<i> the bit rate still stays at 500 kBit/s. Is there something done wrong on
</I>&gt;<i> my side or is this ioctl not implemented yet because I didn't find any
</I>&gt;<i> parts for SIOCSCANBAUDRATE at sja1000.c file at function can_ioctl.
</I>
Hello Kai,

the 'old' style sja1000 driver does not support ioctl(). So you looked
at the right source not finding any parts for SIOCSCANBAUDRATE :-/

AFAIK only the mscan driver supports ioctl() or at least parts of them.
That's one of the reasons why the sja1000-stuff is to be replaced and
updated - and the new sja1000 driver will support sysfs for this kind of
configuration. You have to use the module command line parameters or 
modify the default settings to setup different bitrates on the 'old'
sja1000 driver.

Sorry.

Oliver



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000205.html">[Socketcan-users] IOCTL SocketCan Rev. 399 and sja1000-iomem
</A></li>
	<LI>Next message: <A HREF="000207.html">[Socketcan-users] IOCTL SocketCan Rev. 399 and sja1000-iomem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#206">[ date ]</a>
              <a href="thread.html#206">[ thread ]</a>
              <a href="subject.html#206">[ subject ]</a>
              <a href="author.html#206">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
