<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] SJA1000 errors
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20SJA1000%20errors&In-Reply-To=%3C50A6AE7EE6F18E4C97E9AE374FEC613701049166%40GLKMS2104.GREENLNK.NET%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000415.html">
   <LINK REL="Next"  HREF="000427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] SJA1000 errors</H1>
    <B>Goodall, Mark (UK)</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20SJA1000%20errors&In-Reply-To=%3C50A6AE7EE6F18E4C97E9AE374FEC613701049166%40GLKMS2104.GREENLNK.NET%3E"
       TITLE="[Socketcan-users] SJA1000 errors">mark.goodall at baesystems.com
       </A><BR>
    <I>Thu Jun 19 15:07:10 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000415.html">[Socketcan-users] SJA1000 errors
</A></li>
        <LI>Next message: <A HREF="000427.html">[Socketcan-users] Poll on bit time setting with Socket-CAN
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#416">[ date ]</a>
              <a href="thread.html#416">[ thread ]</a>
              <a href="subject.html#416">[ subject ]</a>
              <a href="author.html#416">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Thanks, I traced the problem to a terminated connector in the middle of
the bus. The problem only occurred under load so I didn't suspect it was
a hardware problem. 


Mark Goodall
Research Associate
tel: 0117 302 8222
<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">mark.goodall at baesystems.com</A>
 
Advanced Information Processing
BAE SYSTEMS, Advanced Technology Centre, Sowerby Building, FPC 267, PO
Box 5, Filton, Bristol BS34 7QW, United Kingdom 

BAE Systems (Operations) Limited
Registered Office: Warwick House, PO Box 87, Farnborough Aerospace
Centre, Farnborough, Hants, GU14 6YU, UK
Registered in England &amp; Wales No: 1996687

-----Original Message-----
From: Wolfgang Grandegger [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">wg at grandegger.com</A>] 
Sent: 19 June 2008 11:16
To: Goodall, Mark (UK)
Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/socketcan-users">socketcan-users at lists.berlios.de</A>
Subject: Re: [Socketcan-users] SJA1000 errors


               *** WARNING ***

This mail has originated outside your organization, either from an
external partner or the Global Internet. 
     Keep this in mind if you answer this message. 

Goodall, Mark (UK) wrote:
&gt;<i> When I load the SJA1000 kernel module with debug and start sending and
</I>
&gt;<i> receiving data over the bus I get a string of the following errors 
</I>&gt;<i> before the connection fails completely:
</I>&gt;<i>  
</I>&gt;<i> can0: ALI #1#
</I>&gt;<i> can0: ALC = 0x00
</I>&gt;<i> can0: BEI #2#
</I>&gt;<i> can0: EEC = 0xA2 (RX, stuff error, ID.28 to ID.28)
</I>&gt;<i> can0: handled 2 IRQs
</I>&gt;<i>  
</I>&gt;<i> guessing from the errors, I think that this means it was attempting to
</I>
&gt;<i> send at the same moment a message arrives, causing the arbitration 
</I>&gt;<i> loss, but the stuff error means the recv''d message is also invalid?
</I>&gt;<i>  
</I>&gt;<i> Is this a problem on the recv'ing end or the other controller.
</I>
I think there are electrical problems on the CAN bus. Check bus
termination and bit-timing. Does the device go bus-off? Please check
/sys/class/net/can0/can_state.

BTW: an application can receive corresponding error frames, e.g.:

  $ candump -e 0xffff any

The debugging code in the SJA1000 driver will be removed sooner than
later.

Wolfgang.



********************************************************************
This email and any attachments are confidential to the intended
recipient and may also be privileged. If you are not the intended
recipient please delete it from your system and notify the sender.
You should not copy it or use it for any purpose nor disclose or
distribute its contents to any other person.
********************************************************************


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000415.html">[Socketcan-users] SJA1000 errors
</A></li>
	<LI>Next message: <A HREF="000427.html">[Socketcan-users] Poll on bit time setting with Socket-CAN
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#416">[ date ]</a>
              <a href="thread.html#416">[ thread ]</a>
              <a href="subject.html#416">[ subject ]</a>
              <a href="author.html#416">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
