<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] can raw write blocking
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20can%20raw%20write%20blocking&In-Reply-To=%3C484B0F12.1020607%40hartkopp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000394.html">
   <LINK REL="Next"  HREF="000398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] can raw write blocking</H1>
    <B>Oliver Hartkopp</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20can%20raw%20write%20blocking&In-Reply-To=%3C484B0F12.1020607%40hartkopp.net%3E"
       TITLE="[Socketcan-users] can raw write blocking">socketcan at hartkopp.net
       </A><BR>
    <I>Sun Jun  8 00:43:30 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000394.html">[Socketcan-users] can raw write blocking
</A></li>
        <LI>Next message: <A HREF="000398.html">[Socketcan-users] can raw write blocking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#395">[ date ]</a>
              <a href="thread.html#395">[ thread ]</a>
              <a href="subject.html#395">[ subject ]</a>
              <a href="author.html#395">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Neal Probert wrote:
&gt;<i> The PCAN driver was returning EAGAIN.
</I>&gt;<i>
</I>&gt;<i> I just realized that the TX queue fills up because there's no receiver 
</I>&gt;<i> to acknowledge the CAN messages.  Once I hooked one up, then the 
</I>&gt;<i> messages flow!
</I>&gt;<i>
</I>&gt;<i> It would be nice if there was some kind of TTL on each frame so they can 
</I>&gt;<i> be expired if they sit in the queue too long.
</I>&gt;<i>
</I>&gt;<i> Is there any call to purge the queue?
</I>&gt;<i>
</I>&gt;<i> Neal Probert wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> In /var/log/messages, I see:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> NETDEV WATCHDOG: can0: transmit timed out message
</I>&gt;&gt;<i>     
</I>
Hello Neal,

in the latest SJA1000 drivers from Wolfgang he also removed the NETDEV 
WATCHDOG as the controller (by specification) has to try to send the 
frame as long as it is not acked ... infinite.

When you do not have a proper setup a write error is an appropriate way 
to tell you, that the CAN frames could not be delivered on the bus.

Do you really feel that there's something missing? What would a TTL or 
the purge of the queue help, when you do not fix your CAN setup?

Regards,
Oliver


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000394.html">[Socketcan-users] can raw write blocking
</A></li>
	<LI>Next message: <A HREF="000398.html">[Socketcan-users] can raw write blocking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#395">[ date ]</a>
              <a href="thread.html#395">[ thread ]</a>
              <a href="subject.html#395">[ subject ]</a>
              <a href="author.html#395">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
