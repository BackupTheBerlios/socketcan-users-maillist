<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Socketcan-users] Performance issues with MPC5200B and socketcan
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/socketcan-users/2011-August/index.html" >
   <LINK REL="made" HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Performance%20issues%20with%20MPC5200B%20and%20socketcan&In-Reply-To=%3CFE9B105D239FC44DA94BE331320F88DB538038%40Zuse1.tracetronic.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002117.html">
   <LINK REL="Next"  HREF="002090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Socketcan-users] Performance issues with MPC5200B and socketcan</H1>
    <B>&quot;M&#252;ller, Ren&#233;&quot;</B> 
    <A HREF="mailto:socketcan-users%40lists.berlios.de?Subject=Re%3A%20%5BSocketcan-users%5D%20Performance%20issues%20with%20MPC5200B%20and%20socketcan&In-Reply-To=%3CFE9B105D239FC44DA94BE331320F88DB538038%40Zuse1.tracetronic.local%3E"
       TITLE="[Socketcan-users] Performance issues with MPC5200B and socketcan">Rene.Mueller at tracetronic.de
       </A><BR>
    <I>Wed Aug 17 10:38:46 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002117.html">[Socketcan-users] Using sja1000_isa on a 64b system
</A></li>
        <LI>Next message: <A HREF="002090.html">[Socketcan-users] Performance issues with MPC5200B and socketcan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2089">[ date ]</a>
              <a href="thread.html#2089">[ thread ]</a>
              <a href="subject.html#2089">[ subject ]</a>
              <a href="author.html#2089">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I have an performance issue with socketcan and an MPC5200B. My setup looks like this:
 - MPC5200B board (TQM5200)
 - custom base board with two PCA82C251, one for each can controller
 - linux-2.6.27.18-denx, I use the mpc52xx driver
 - booted with uboot and kernel from flash
 - mount root filesystem via NFS
 - can0 with 1Mbit/s
 - candump -l can0 to tmpfs

Now I play with the busload on can0 (generated by CANalyzer and three CANcaseXL). This leads to the following results:
 - 0% to 71% busload -&gt; no missing frames
 - 74% busload -&gt; 5% missing frames
 - 77% busload -&gt; 10% missing frames
 - 90% busload -&gt; 45% missing frames

The missing frames are measured by comparison of the candump log file against the CANalyzer log file. The indicated busload is measured by CANalyzer. The cause seems to be very simple: the cpu load is too high (or the cpu is too slow). When the busload is under 71%, the cpu load is under 100%. When the busload goes higher than 71%, the cpu load is 100%. This seems to be the cause for the missing frames.

Has anyone else ever seen such an performance issue? Does someone use the MPC5200B in high busload environments? Maybe I configured something wrong in my linux.

What about lincan? It has an character device approach with very little overhead. Is there an chance, that this will solve my problem?


Best regards,
Ren&#233;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002117.html">[Socketcan-users] Using sja1000_isa on a 64b system
</A></li>
	<LI>Next message: <A HREF="002090.html">[Socketcan-users] Performance issues with MPC5200B and socketcan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2089">[ date ]</a>
              <a href="thread.html#2089">[ thread ]</a>
              <a href="subject.html#2089">[ subject ]</a>
              <a href="author.html#2089">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/socketcan-users">More information about the Socketcan-users
mailing list</a><br>
</body></html>
